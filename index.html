<!DOCTYPE html>
<html>
  <head>
    <title>Prueba Firebase Hosting + Storage</title>
    <!-- SDKs compat (para HTML directo, sin build) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
  </head>
  <body>
    <h1>Prueba Firebase Hosting + Storage</h1>

    <button onclick="login()">Iniciar sesión con Google</button>
    <input type="file" id="fileInput">
    <button onclick="uploadFile()">Subir archivo</button>

    <script>
      // Configuración de tu proyecto Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyDmGboo0Apcx9oJSrjlFfDYtDs3BjTJYsQ",
        authDomain: "faltaunov2.firebaseapp.com",
        projectId: "faltaunov2",
        storageBucket: "faltaunov2.appspot.com",
        messagingSenderId: "906428933845",
        appId: "1:906428933845:web:4d8622c58f6ae26fe1a45c"
      };

      // Inicialización de Firebase
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const storage = firebase.storage();

      function login() {
        const provider = new firebase.auth.GoogleAuthProvider();
        auth.signInWithPopup(provider).then(result => {
          alert("Sesión iniciada como " + result.user.email);
        }).catch(error => {
          console.error("Error al iniciar sesión:", error);
        });
      }

      function uploadFile() {
        const user = auth.currentUser;
        if (!user) return alert("Primero iniciá sesión");

        const file = document.getElementById("fileInput").files[0];
        if (!file) return alert("Seleccioná un archivo");

        const ref = storage.ref(`archivos/${user.uid}/${file.name}`);
        ref.put(file).then(() => {
          alert("Archivo subido con éxito");
        }).catch(error => {
          console.error("Error al subir:", error);
        });
      }
    </script>
  </body>
</html>
